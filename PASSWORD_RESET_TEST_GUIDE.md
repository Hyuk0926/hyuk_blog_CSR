# 🔐 비밀번호 재설정 테스트 가이드

## 개요
이 가이드는 실제 사용자 계정을 사용하여 비밀번호 재설정 기능을 테스트하는 방법을 설명합니다.

## 1. 실제 사용자 계정 생성

### 방법 1: 웹 인터페이스를 통한 회원가입
1. 프론트엔드 서버 실행: `npm run serve`
2. 브라우저에서 `http://localhost:3000` 접속
3. "회원가입" 링크 클릭
4. 실제 이메일 주소로 계정 생성
5. 이메일 인증 확인 (필요한 경우)

### 방법 2: 환경변수를 통한 데모 계정 생성
```bash
# Windows
set DEMO_USER_USERNAME=your_username
set DEMO_USER_PASSWORD=your_password
set DEMO_USER_EMAIL=your_real_email@example.com
set DEMO_USER_NICKNAME=your_nickname

# Linux/Mac
export DEMO_USER_USERNAME=your_username
export DEMO_USER_PASSWORD=your_password
export DEMO_USER_EMAIL=your_real_email@example.com
export DEMO_USER_NICKNAME=your_nickname
```

## 2. 비밀번호 재설정 테스트 단계

### 2.1 비밀번호 재설정 요청
1. 로그인 페이지에서 "비밀번호를 잊으셨나요?" 클릭
2. 실제 등록된 이메일 주소 입력
3. "비밀번호 재설정 이메일 발송" 버튼 클릭
4. 성공 메시지 확인

### 2.2 이메일 확인
1. 실제 이메일함 확인
2. 비밀번호 재설정 링크가 포함된 이메일 수신 확인
3. 이메일 내용 및 링크 정상 작동 확인

### 2.3 새 비밀번호 설정
1. 이메일의 재설정 링크 클릭
2. 새 비밀번호 입력 (6자 이상)
3. 비밀번호 확인 입력
4. "비밀번호 변경하기" 버튼 클릭
5. 성공 메시지 및 자동 로그인 페이지 이동 확인

### 2.4 새 비밀번호로 로그인
1. 로그인 페이지에서 새 비밀번호로 로그인 시도
2. 정상 로그인 확인
3. 기존 비밀번호로는 로그인 불가 확인

## 3. 테스트 시나리오

### 시나리오 1: 정상적인 비밀번호 재설정
- ✅ 존재하는 이메일로 재설정 요청
- ✅ 이메일 수신 및 링크 클릭
- ✅ 새 비밀번호 설정
- ✅ 새 비밀번호로 로그인

### 시나리오 2: 존재하지 않는 이메일
- ✅ 존재하지 않는 이메일로 재설정 요청
- ✅ 보안상 성공 메시지 표시 (실제로는 이메일 발송 안됨)
- ✅ 이메일 수신 안됨 확인

### 시나리오 3: 만료된 토큰
- ✅ 정상적인 재설정 요청
- ✅ 24시간 후 링크 클릭 시도
- ✅ 토큰 만료 메시지 확인

### 시나리오 4: 이미 사용된 토큰
- ✅ 정상적인 재설정 요청
- ✅ 링크 클릭하여 비밀번호 변경
- ✅ 동일한 링크 재사용 시도
- ✅ 이미 사용된 토큰 메시지 확인

### 시나리오 5: 비밀번호 불일치
- ✅ 정상적인 재설정 요청
- ✅ 링크 클릭
- ✅ 서로 다른 비밀번호 입력
- ✅ 비밀번호 불일치 메시지 확인

## 4. 보안 확인사항

### 4.1 이메일 보안
- ✅ 실제 이메일 주소로만 재설정 가능
- ✅ 존재하지 않는 이메일은 보안상 성공 응답
- ✅ 이메일 내용에 민감한 정보 노출 없음

### 4.2 토큰 보안
- ✅ 24시간 후 자동 만료
- ✅ 1회 사용 후 무효화
- ✅ 안전한 토큰 생성 (32자리 랜덤 문자열)

### 4.3 비밀번호 보안
- ✅ 최소 6자 이상 요구
- ✅ 비밀번호 확인 필수
- ✅ 암호화된 저장

## 5. 문제 해결

### 5.1 이메일 수신 안됨
- 스팸함 확인
- 이메일 주소 정확성 확인
- Gmail 설정 확인 (앱 비밀번호 등)

### 5.2 링크 클릭 시 오류
- 토큰 만료 확인 (24시간)
- 이미 사용된 토큰인지 확인
- 브라우저 캐시 삭제

### 5.3 새 비밀번호 설정 실패
- 비밀번호 길이 확인 (6자 이상)
- 비밀번호 확인 일치 여부 확인
- 특수문자 사용 시 인코딩 문제 확인

## 6. 로그 확인

### 6.1 백엔드 로그
```bash
# 비밀번호 재설정 요청 로그
PasswordResetService.requestPasswordReset 시작: user@example.com
사용자 조회 결과: true
기존 토큰 삭제 시작
기존 토큰 삭제 완료
새 토큰 생성 시작
토큰 생성 완료: [토큰값]
이메일 발송 시작: [URL]
이메일 발송 완료
```

### 6.2 프론트엔드 로그
- 브라우저 개발자 도구 콘솔 확인
- 네트워크 탭에서 API 요청/응답 확인

## 7. 성능 테스트

### 7.1 동시 요청 테스트
- 여러 사용자가 동시에 재설정 요청
- 토큰 충돌 없이 정상 처리 확인

### 7.2 대용량 테스트
- 많은 수의 재설정 요청 처리
- 데이터베이스 성능 확인

## 8. 운영 환경 고려사항

### 8.1 이메일 서비스
- Gmail 대신 전문 이메일 서비스 사용 권장
- 이메일 전송 실패 시 재시도 로직
- 이메일 템플릿 다국어 지원

### 8.2 모니터링
- 재설정 요청 수 모니터링
- 실패율 추적
- 이상 패턴 감지

### 8.3 보안 강화
- Rate limiting 적용
- IP 기반 제한
- 의심스러운 활동 감지
